define(["exports","module","conditioner/utils/Observer","toggle/Toggle"],function(e,t,i,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=s(i),r=s(n),a="collapsible-init",_=".collapsible-inner",u="collapsible-open",c="height",d="transitionEnd",g=function(){function e(t,i){var n=this;o(this,e),this._element=t,this._options=i||{},this._expanded=!1;var s=this._element.querySelector(_);if(s){var h=parseInt(window.getComputedStyle(s,null).getPropertyValue("margin-bottom").replace("px",""));this._height=s.offsetHeight+h,this._toggle=new r["default"](t,i),this._windowWidth=window.innerWidth,this._onActiveFn=function(){return n._expand()},this._onInActiveFn=function(){return n._collapse()},this._onResizeFn=function(){return n._onResize()},this._transitionEndFn=function(e){return n._onTransitionEnd(e)},this._initialize()}}return h(e,[{key:"_initialize",value:function(){this._element.style.height=0,this._element.classList.remove(a),l["default"].subscribe(this._toggle,this._toggle.activeEvent,this._onActiveFn),l["default"].subscribe(this._toggle,this._toggle.inActiveEvent,this._onInActiveFn),this._toggle.active&&this._toggle.activate(),window.addEventListener("resize",this._onResizeFn),this._element.addEventListener(d,this._transitionEndFn)}},{key:"_setHeight",value:function(){this._expanded?this._collapse():this._expand()}},{key:"_expand",value:function(){this._element.style.height=this._height+"px",this._expanded=!0}},{key:"_collapse",value:function(){this.reset();this._element.offsetHeight;this._element.style.height=0,this._expanded=!1}},{key:"_onResize",value:function(){window.innerWidth!==this._windowWidth&&(this.reset(),this._expanded?this._expand():this._collapse(),this._windowWidth=window.innerWidth)}},{key:"_onTransitionEnd",value:function(e){e.propertyName===c&&(this._toggle.active?(this._element.classList.add(u),this._element.style.height="auto"):l["default"].publish(this,d))}},{key:"reset",value:function(){this._element.classList.remove(u),this._element.removeAttribute("style"),this._height=this._element.offsetHeight,this._element.style.height=this._height+"px"}},{key:"unload",value:function(){this._toggle.unload(),this._element.classList.remove(u),this._element.removeAttribute("style"),l["default"].unsubscribe(this._toggle,this._toggle.activeEvent,this._onActiveFn),l["default"].unsubscribe(this._toggle,this._toggle.inActiveEvent,this._onInActiveFn),window.removeEventListener("resize",this._onResizeFn),this._element.removeEventListener(d,this._transitionEndFn)}}]),e}();t.exports=g});
//# sourceMappingURL=Collapsible.js.map
